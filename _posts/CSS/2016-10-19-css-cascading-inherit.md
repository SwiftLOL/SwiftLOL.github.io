---
layout: post
title: CSS权威指南--CSS继承与层叠
categories: CSS
description: CSS继承与层叠规程
keywords: CSS、继承、层叠
---

<style type="text/css">
code {color: rgb(135,185,98) !important;}
em {color: rgb(184,92,213) !important;}
</style>
## Overview
  所谓继承，就是一个元素能够让其后代元素也能够使用期样式属性值的能力。
  在为元素的某个样式属性决定使用哪个值的时候，需要考虑样式的继承性，并且根据样式声明的来源、特殊性等条件来判断,这就是层叠。


### 特殊性
  在HTML文档中，可能会同时出现多个规则，对于每个规则，用户代理会计算选择器的特殊性，并将这些特殊性附加到规则中的各个声明上。如果一个元素有两个或者多个冲突的属性声明，那么最高特殊性的声明就会胜出。

  特殊性由规则中的选择器决定。特殊性的值表述为4个部分，如0,0,0,0。

一个选择器的具体特殊性如下确定:

  * 对于选择器给定的各个ID属性值，加0,1,0,0
  * 对于选择器中给定的各个类属性值、属性选择或者伪类，加0，0，1，0
  * 对于选择器中给定的各个元素和伪元素，加0,0,0,1。
  * 结合符和通配符对选择器的特殊性没有任何贡献。但通配符与众不同，它的特殊性为0，0，0，0。而结合符则没有特殊性。
  * 内联样式的特殊性的第一个值为1。也就是说0,0,0,0规则中的第一个位置是为内联样式保留的。
  * 继承的值没有特殊性，连0，0，0，0都没有。
一旦确定一个选择器的特殊性，这个值会应用到器相关的声明上。
如果对个规则与同一元素匹配，而且声明相关冲突，在这种情况下特殊性就很重要。


#### 重要性
有时某个声明可能非常重要，超过了所有其他声明，我们可以在声明的分号前加!important标识表示。比如:<br>

`p {color: red !important}`<br>

!important不会改变一个规则的特殊性，但是要与非重要声明分开考虑。实际上，所有!important声明会分组在一起。重要声明的冲突会在重要声明组内部解决。


### 继承
  在css中一个元素具有向后代传递样式属性值的能力，这就是样式的继承。继承一般是由上向下，但是有一个例外，*body元素的背景样式可以传递到html元素上。*
  但是并非所有的属性都可以继承。这往往归结于一个简单的常识。例如属性border就不会继承，如果边框能够继承，文档就会变得混乱，到处都是框框。大多数属性比如内外边距、背景、边框都不能继承。<br>

  在开发中使用继承和通配符会产生不可预料的结果。所有尽量少使用不加区别的通配符。比如:<br>

  ` h1#page-title {color: black}
    * {color: gray}
    <h1 id="page-title">Meerkat <em>Central</em></h1>
    <p>welcome to the best place on the web for meerkat information</p>`<br>

 由于em元素继承了h1的color,但是继承没有特殊性,而通配符的继承性为0，0，0，0.

 当一个元素没有任何样式规则对应的时候，它只能通过继承获得。也就是根据它的父元素的属性值进行判断。


### 层叠
  对于层叠这个概念，从‘层叠样式表’这个名字可以得到一点提示。CSS所基于的方法就是通过继承和特殊性，让样式层叠在一起。
  当样式声明出现冲突的时候，根据四个因素决定最终使用哪个样式声明。

  * 权重
    权重是指有没有!important标识。有权重的样式声明会被优先选中。
  * 来源
    来源分三种:页面开发者创建的样式表、用户偏好设置的样式表、浏览器默认样式表。
  * 特殊性
    根据样式声明的选择器判断，哪个选择器的特殊性高，使用哪个样式声明
  * 顺序
    顺序是指，当权重、来源、特殊性都相同的时候，哪个声明最后出现就使用哪个样式声明，其实就是假设后面出现的覆盖前面出现的。


  这四个因为的优先级是权重>来源>特殊性>顺序，也就是说当前面几个因素都相同的情况下，才会考虑下面几个因素，最后做出判断使用哪个样式声明。

*note:<br>
1.读者来源的!important样式声明优先于创作者来源的!important样式声明。<br>
2.一般假设在link一些css文件的时候，默认这些链接进来的样式声明会排列在主样式表(style元素里的样式声明)内容的后面.*
