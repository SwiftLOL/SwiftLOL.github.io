---
layout: post
title:  "css学习笔记二(结构和重叠)"
date:   2017-07-01 13:00:00
author: wangjiajiajohn
categories: css学习笔记
tags: css cascade
---

# 结构和重叠

在使用选择器为元素添加样式的时候，同一个元素，可能同时存在多个css规则与之匹配。但是在同一时刻，只有一个规则能够作用在这个元素上。为了判断哪个规则能够作用在这个元素上，我们需要考虑规则的特殊性、继承性、重要性、层叠。

## 1. css规则的继承性

css2.1开始为css规则定义了特殊性，其实它是按照某种约定计算权重的方法。对于元素某个css属性的多个规则，权重最大的才会生效。

css特殊性权重用四位表示。默认0.0.0.0

   * 根据一个规则是不是内联样式中的规则，来觉得第一位数字是0还是1，如果一条规则其存在于内联样式中，这条规则中的每条css属性及属性值的权重第一位都是1

   * 根据规则中有几个id选择器，来计算第二位的权重。

   * 根据规则中有几个类选择器、属性选择器、伪类选择器，来计算第三位的权重。

   * 根据规则中有几个元素选择器、伪元素选择器，来计算第四位的权重。

**_组合符对特殊性没有任何意义,通配符的特殊性为0.0.0.0。_**


## 2. 重要性

 有时，我们需要使用某条规则，而不考虑其特殊性。这个时候，我们需要使用规则的特殊性。就是在每个属性及属性值后面、分号的前面，使用!important。

 具有重要性的规则，比没有重要性的规则权重更大。所以，我们一般先将所有的规则划分为有重要性和没有重要性的两组，然后再在有重要性的规则中，按照特殊性去判断最后使用哪一条规则。


## 3. 继承性

当我们为某个元素设置样式的时候，如果这个样式是可继承的，其子元素就可能继承这些样式。
**但继承是没有任何权重的。它和通配符的特殊性还不同，通配符的特殊性是0.0.0.0，继承没有特殊性这个概念,所以当一个元素具有通配符样式和继承样式的时候，通配符样式优先于继承样式。**


## 4. 层叠

层叠是用于处理相等特殊性规则下，选择哪条规则的方法。

 * 从样式的来源创作者、读者、用户代理样式，

  判断权重: 读者的重要样式 > 创作者的重要样式 >   创作者的普通样式 > 读者的正常声明 > 用户代理的样式

 * 按照顺序判断样式。具有相同权重的样式，越往后出现，其权重越高。

   在为链接样式:link. :visited :hover :activie使用css样式的时候，需要注意他们的顺序。因为他们的权重相同，如果把:link :visited放在最后，因为链接要么访问过，要么未访问过，所以:hover :active的样式永远不会被选中。所以一般将这个两中样式写在前面。css推荐的顺序是:link :visited :hover :active。



综上，在css判断使用哪条规则的时候，过程为:

1. 从以下顺序选择最合适的规则。

   读者重要规则 > 创作者重要规则 > 创作者普通规则 > 读者普通规则 > 用户代理规则

2. 之后从上面的结果中，按照特殊性选择

   * 内联样式 优先

   * 其次具有id选择器的优先

   * 之后具有类选择器、伪类选择器、属性选择器的规则优先

   * 之后具有元素选择器、伪元素选择器的优先

   * 之后具有通配符的优先

   * 最后继承来的规则优先

